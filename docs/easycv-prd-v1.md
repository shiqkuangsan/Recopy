# EasyCV V1 产品需求文档（PRD）

> 版本：V1.0 Draft  
> 日期：2026-02-23  
> 定位：Paste 的开源跨平台替代  
> 平台：macOS + Windows  
> 开源协议：待定

---

## 一、产品概述

EasyCV 是一款免费开源的跨平台剪贴板历史管理工具，提供类 Paste 的视觉化卡片交互体验。用户在 macOS 和 Windows 上获得一致的剪贴板管理能力：自动记录每一次复制（纯文本、富文本、图片、文件），通过搜索快速查找，通过收藏和分组持久管理。

### 核心价值主张

```
"你的每一次复制，都不会再丢失。"
```

- 对标 Paste 的视觉化体验，但免费开源
- 跨平台统一体验（macOS + Windows）
- 完整的多源复制支持（纯文本 / 富文本 / 图片 / 文件）

### 目标用户

- 日常在 Mac 和/或 Windows 上频繁使用复制粘贴的知识工作者
- 对系统原生剪贴板历史不满的用户（macOS 只存纯文本、Windows 只有 25 条无搜索）
- 当前 Paste 用户中希望跨平台或不愿付费的人群
- 开发者、设计师、写作者等高频复制粘贴场景

---

## 二、功能需求

### FR-01 剪贴板监听与自动记录

**描述**：后台持续监听系统剪贴板变化，自动记录每一次复制操作。

| 子项 | 要求 |
|------|------|
| FR-01.1 | 支持监听以下内容类型：纯文本（plain text）、富文本（RTF / HTML / attributed string）、图片（PNG / JPG / BMP / TIFF 等主流格式）、单文件（记录文件路径 + 文件名 + 类型） |
| FR-01.2 | 每条记录需保存：内容本体、内容类型、来源应用（App 名称 + 图标）、复制时间戳、内容大小 |
| FR-01.3 | 去重：连续复制完全相同的内容不产生新记录，将已有记录移至最顶部 |
| FR-01.4 | 历史条数无上限，持久存储到本地数据库，不因应用重启或系统重启而丢失 |
| FR-01.5 | 单条记录大小上限：暂定 50MB（覆盖大图场景），超出则不记录并在 UI 上无感跳过 |

**验收标准**：
- 在任意 App 中按 Cmd+C / Ctrl+C，EasyCV 后台在 500ms 内捕获并存入数据库
- 关闭并重新打开 EasyCV，所有历史记录完整可见
- 系统重启后所有历史记录完整可见

---

### FR-02 主面板 UI（核心交互）

**描述**：通过全局快捷键一键呼出主面板，以视觉化卡片流展示剪贴板历史。

| 子项 | 要求 |
|------|------|
| FR-02.1 | 全局快捷键呼出/隐藏主面板（默认 macOS: `Cmd+Shift+V`，Windows: `Ctrl+Shift+V`；用户可自定义） |
| FR-02.2 | 主面板以卡片流（横向或纵向排列，参考 Paste）展示历史记录，最新的在最前 |
| FR-02.3 | 每张卡片根据内容类型展示不同的预览：|
| | - 纯文本：显示前 N 行文本内容，截断过长内容 |
| | - 富文本：渲染富文本预览（保留格式、颜色、字号等视觉样式） |
| | - 图片：显示缩略图 |
| | - 文件：显示文件类型图标 + 文件名 |
| FR-02.4 | 每张卡片显示辅助信息：来源 App 图标、复制时间（相对时间如"3分钟前"） |
| FR-02.5 | 点击/回车卡片 → 将该条内容写入系统剪贴板并自动粘贴到前台 App，同时关闭主面板 |
| FR-02.6 | 键盘优先操作：方向键浏览卡片、回车粘贴、Esc 关闭面板、输入文字自动进入搜索 |
| FR-02.7 | 主面板失焦时自动关闭（可在设置中关闭此行为） |

**交互参考**：Paste App 的卡片流体验。

**验收标准**：
- 在任意上下文按快捷键，面板在 200ms 内出现
- 纯文本、富文本、图片、文件四种类型分别有差异化的卡片预览
- 全键盘操作可完成：呼出 → 浏览 → 选中 → 粘贴 → 关闭的完整流程

---

### FR-03 搜索与过滤

**描述**：在主面板中快速搜索和过滤历史记录。

| 子项 | 要求 |
|------|------|
| FR-03.1 | 主面板顶部搜索框，呼出面板后直接输入即开始搜索（无需点击搜索框） |
| FR-03.2 | 全文搜索：匹配纯文本内容、富文本中的文字内容、文件名 |
| FR-03.3 | 实时过滤：每输入一个字符即时刷新结果，无需按回车 |
| FR-03.4 | 按内容类型过滤：提供快速筛选按钮/Tab —— 全部 / 文本 / 图片 / 文件 |
| FR-03.5 | 搜索无结果时显示空状态提示 |

**验收标准**：
- 10,000 条历史中搜索关键词，结果在 100ms 内显示
- 点击"图片"过滤按钮，仅显示图片类型的记录
- 搜索 + 类型过滤可叠加使用

---

### FR-04 收藏（Pin）

**描述**：将重要的剪贴板条目标记为收藏，使其不会被清除或淹没在历史中。

| 子项 | 要求 |
|------|------|
| FR-04.1 | 每条卡片可通过右键菜单或快捷操作（如按星标图标）标记为"收藏" |
| FR-04.2 | 收藏的条目永久保留，不受历史清理策略影响 |
| FR-04.3 | 主面板提供"收藏"视图/Tab，集中查看所有收藏条目 |
| FR-04.4 | 已收藏的卡片在历史流中有视觉标记（如星标/高亮边框） |
| FR-04.5 | 取消收藏：已收藏的条目可随时取消收藏 |

**验收标准**：
- 收藏一条内容后，清除全部历史，该条目仍存在于收藏视图中
- 收藏视图中可直接点击粘贴

---

### FR-05 分组管理

**描述**：用户可创建自定义分组（类似 Paste 的 Pinboard），将收藏的条目归类整理。

| 子项 | 要求 |
|------|------|
| FR-05.1 | 用户可创建、重命名、删除自定义分组 |
| FR-05.2 | 每条收藏的条目可分配到一个或多个分组 |
| FR-05.3 | 主面板侧边栏或 Tab 中展示分组列表，点击分组查看其中的条目 |
| FR-05.4 | 分组支持拖拽排序 |
| FR-05.5 | 提供默认分组"未分类收藏"，收藏但未分配分组的条目归入此处 |

**验收标准**：
- 创建"工作"和"个人"两个分组，将不同收藏条目分配到不同分组，切换分组查看各自内容
- 删除分组时，其中的条目不被删除，回到"未分类收藏"

---

### FR-06 粘贴操作

**描述**：从 EasyCV 选中条目后写入系统剪贴板并粘贴。

| 子项 | 要求 |
|------|------|
| FR-06.1 | 主粘贴操作（点击/回车）：将条目原始格式写入剪贴板，关闭面板，模拟 Cmd+V / Ctrl+V 粘贴到前台 App |
| FR-06.2 | 纯文本粘贴选项：右键菜单提供"粘贴为纯文本"，剥离富文本格式仅粘贴文字内容 |
| FR-06.3 | 仅复制到剪贴板（不粘贴）：右键菜单提供"复制到剪贴板"，不触发粘贴动作，不关闭面板 |

**验收标准**：
- 选择一条富文本记录，主粘贴到 Pages/Word 中保留格式
- 同一条记录选择"粘贴为纯文本"，粘贴到 Pages/Word 中无格式
- 选择"复制到剪贴板"后面板不关闭，此时在其他 App 中 Cmd+V 可粘贴该内容

---

### FR-07 隐私与排除规则

**描述**：保护用户隐私，避免记录敏感内容。

| 子项 | 要求 |
|------|------|
| FR-07.1 | App 排除列表：用户可配置排除特定 App 的复制内容不被记录（如 1Password、Bitwarden 等） |
| FR-07.2 | 预置排除：默认排除系统密码管理器（macOS Passwords App 复制的内容已由系统排除；Windows 需视情况处理） |
| FR-07.3 | 一键清空：提供清空全部历史的操作（不影响收藏条目），需二次确认 |
| FR-07.4 | 单条删除：右键菜单提供删除单条记录的选项 |
| FR-07.5 | 数据完全本地存储，不上传任何内容到网络 |

**验收标准**：
- 将 1Password 加入排除列表后，从 1Password 复制密码不出现在 EasyCV 历史中
- 清空历史后，收藏条目仍保留
- 断网状态下所有功能正常运作

---

### FR-08 系统托盘 / 菜单栏

**描述**：以系统托盘（Windows）或菜单栏（macOS）常驻，提供快速访问。

| 子项 | 要求 |
|------|------|
| FR-08.1 | macOS：菜单栏图标常驻；Windows：系统托盘图标常驻 |
| FR-08.2 | 左键点击图标：打开/关闭主面板 |
| FR-08.3 | 右键点击图标：显示菜单（设置、清空历史、暂停/恢复监听、关于、退出） |
| FR-08.4 | 暂停/恢复监听：临时停止记录剪贴板内容（图标有视觉状态变化） |

**验收标准**：
- 暂停监听后复制内容不被记录，恢复后继续记录

---

### FR-09 设置

**描述**：提供基础配置能力。

| 子项 | 要求 |
|------|------|
| FR-09.1 | 快捷键自定义：修改呼出主面板的全局快捷键 |
| FR-09.2 | 开机自启动：开关 |
| FR-09.3 | 历史保留策略：无限（默认） / 保留最近 N 天 / 保留最近 N 条 |
| FR-09.4 | App 排除列表管理（FR-07.1） |
| FR-09.5 | 外观：跟随系统 / 浅色 / 深色 |
| FR-09.6 | 语言：跟随系统 / 中文 / English（V1 至少支持中英双语） |
| FR-09.7 | 主面板失焦自动关闭：开关 |
| FR-09.8 | 单条内容大小上限配置（默认 50MB） |

**验收标准**：
- 修改快捷键后立即生效
- 设置"保留最近 30 天"，30 天前的未收藏记录自动清除

---

## 三、非功能需求

### NFR-01 性能

| 指标 | 要求 |
|------|------|
| 快捷键到面板出现 | ≤ 200ms |
| 搜索响应（10,000 条数据） | ≤ 100ms |
| 剪贴板监听延迟 | ≤ 500ms |
| 内存占用（空闲时） | ≤ 100MB |
| 安装包体积 | ≤ 30MB |
| 数据库不影响系统性能 | 10万条记录时无感知卡顿 |

### NFR-02 兼容性

| 平台 | 最低版本 |
|------|---------|
| macOS | 13.0 (Ventura) 及以上 |
| Windows | Windows 10 (1809) 及以上 |

### NFR-03 数据安全

- 所有数据本地存储，零网络通信
- 数据库文件存放在用户目录下，跟随系统权限控制
- 数据库不加密（V1），后续版本可考虑可选加密

### NFR-04 安装与更新

- macOS：提供 .dmg 安装包 + Homebrew Cask
- Windows：提供 .msi/.exe 安装包 + winget
- 自动检查更新（可在设置中关闭），提示用户手动下载安装

---

## 四、V1 不做的事

明确边界，避免范围蔓延：

| 功能 | 状态 | 说明 |
|------|------|------|
| Paste Stack（批量粘贴） | ❌ V2 | 有价值但非核心，V2 考虑 |
| 云同步 / 跨设备同步 | ❌ V2+ | 复杂度高，V1 专注本地体验 |
| 移动端（iOS / Android） | ❌ 长期 | 桌面端体验做好再考虑 |
| AI 能力（语义搜索、智能分类、摘要） | ❌ 不做 | 保持工具纯粹 |
| OCR（图片文字提取） | ❌ V2 | 有价值但非核心 |
| 内容编辑 | ❌ 暂不做 | 剪贴板管理器不是编辑器 |
| 团队协作 / 共享片段库 | ❌ 不做 | 不符合产品定位 |
| 格式转换（JSON格式化、URL解码等） | ❌ 不做 | PowerToys 已覆盖 |
| 按来源 App 过滤 | ❌ V2 | 有价值但 V1 优先级不够 |
| 拼音首字母搜索 | ❌ V2 | 中文场景有用，V2 考虑 |
| Linux 支持 | ❌ V2 | 优先做好 Mac + Windows |
| 数据导入/导出 | ❌ V2 | V1 先跑起来 |

---

## 五、信息架构

```
EasyCV
├── 主面板（快捷键呼出）
│   ├── 搜索框（自动聚焦，输入即搜索）
│   ├── 类型过滤 Tab（全部 / 文本 / 图片 / 文件）
│   ├── 视图切换
│   │   ├── 历史流（默认，按时间倒序）
│   │   ├── 收藏（所有已收藏条目）
│   │   └── 分组列表（用户自定义分组）
│   └── 卡片流区域
│       └── 卡片 × N
│           ├── 内容预览（文本/富文本渲染/缩略图/文件图标）
│           ├── 来源 App 图标 + 复制时间
│           ├── 收藏标记
│           └── 右键菜单
│               ├── 粘贴
│               ├── 粘贴为纯文本
│               ├── 复制到剪贴板
│               ├── 收藏 / 取消收藏
│               ├── 移到分组...
│               └── 删除
├── 系统托盘/菜单栏
│   ├── 左键 → 打开主面板
│   └── 右键菜单
│       ├── 设置
│       ├── 清空历史
│       ├── 暂停/恢复监听
│       ├── 关于
│       └── 退出
└── 设置窗口
    ├── 通用（快捷键、开机自启、语言、外观）
    ├── 历史（保留策略、大小上限）
    ├── 隐私（App 排除列表）
    └── 关于（版本、开源协议、GitHub 链接）
```

---

## 六、数据模型（概要）

### 剪贴板条目（ClipboardItem）

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| content_type | enum | plain_text / rich_text / image / file |
| plain_text | text | 纯文本内容（富文本也提取纯文本用于搜索） |
| rich_content | blob | 富文本原始数据（RTF/HTML）或图片二进制数据 |
| file_path | text | 文件类型时的完整路径 |
| file_name | text | 文件名 |
| source_app | text | 来源应用标识符（bundle id / exe name） |
| source_app_name | text | 来源应用显示名 |
| content_size | integer | 内容大小（字节） |
| created_at | datetime | 复制时间 |
| is_favorited | boolean | 是否收藏 |
| content_hash | text | 内容哈希值（用于去重） |

### 分组（Group）

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| name | text | 分组名称 |
| sort_order | integer | 排序顺序 |
| created_at | datetime | 创建时间 |

### 条目-分组关联（ItemGroup）

| 字段 | 类型 | 说明 |
|------|------|------|
| item_id | UUID | 外键 → ClipboardItem.id |
| group_id | UUID | 外键 → Group.id |

### 存储方案

- 数据库：SQLite（轻量、零配置、跨平台）
- 图片存储：缩略图存数据库 blob，原图存文件系统（按日期分目录）
- 数据库位置：
  - macOS: `~/Library/Application Support/EasyCV/`
  - Windows: `%APPDATA%/EasyCV/`
- 搜索索引：SQLite FTS5（全文搜索扩展）

---

## 七、技术选型

> 详见独立文档：**easycv-tech-selection.md**

| 维度 | 选型 | 说明 |
|------|------|------|
| 框架 | **Tauri v2** | 安装包 <10MB、内存 30-40MB、Rust 后端。EcoPaste 已验证 |
| 前端 | **React 18 + TypeScript** | 生态成熟，虚拟列表方案完善 |
| 构建 | **Vite** | 快速 HMR，Tauri 官方推荐 |
| UI | **Tailwind CSS + Radix UI** | 轻量可定制，适合精致工具类 UI |
| 状态管理 | **Zustand** | 轻量无 boilerplate |
| 数据库 | **SQLite**（Rust sqlx） | 零配置本地存储，编译时类型检查 |
| 全文搜索 | **SQLite FTS5 trigram** | 零额外依赖，天然支持中文子串匹配 |
| 剪贴板 | **tauri-plugin-clipboard-x** | 全格式读写 + 监听，EcoPaste 作者维护 |
| 全局快捷键 | **tauri-plugin-global-shortcut** | Tauri 官方插件 |
| 包管理 | **pnpm** | 标准选择 |

---

## 附录 A：用户操作流程

### 流程 1：基础复制-查找-粘贴

```
1. 用户在浏览器中复制一段文字    → EasyCV 后台自动记录
2. 用户继续工作，复制了其他内容    → EasyCV 继续记录
3. 用户需要找回之前的文字        → 按 Cmd+Shift+V 呼出面板
4. 面板打开，显示卡片流历史       → 用户直接输入关键词搜索
5. 找到目标卡片                → 按回车
6. 内容粘贴到当前 App，面板关闭
```

### 流程 2：收藏常用内容

```
1. 用户复制公司地址              → EasyCV 记录
2. 用户呼出面板，找到该条目       → 右键 → 收藏
3. 用户创建分组"工作常用"        → 将该条目移入分组
4. 以后需要时                   → 呼出面板 → 切换到"工作常用"分组 → 直接粘贴
```

### 流程 3：隐私保护

```
1. 用户将 1Password 加入排除列表
2. 用户从 1Password 复制密码     → EasyCV 不记录
3. 用户从浏览器复制正常内容       → EasyCV 正常记录
```
