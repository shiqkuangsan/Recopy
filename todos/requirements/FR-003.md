# FR-003: App 排除列表

## 基本信息

- **优先级**：P1
- **状态**：待开发
- **关联**：M6-4
- **依赖**：FR-002（需要来源 App 检测才能判断排除）

## 背景

用户可能不希望某些应用（如密码管理器 1Password、银行 App）的剪贴板内容被记录。设置页面 Privacy Tab 已预留 UI 占位（"Coming soon"）。

## 需求描述

1. 设置页面提供应用排除列表管理界面
2. 用户可添加/移除需要排除的应用
3. 剪贴板监听时检查来源应用是否在排除列表中，是则跳过存储

## 实现方案

### 存储

排除列表存入 settings 表，key 为 `excluded_apps`，value 为 JSON 数组：
```json
["com.1password.1password", "com.apple.Keychain-Circle-Notification"]
```

### 过滤逻辑

在 `process_clipboard_change()` 中，获取 source_app（bundle ID），查询排除列表，匹配则跳过：
```rust
if excluded_apps.contains(&source_app) {
    log::info!("Skipping clipboard from excluded app: {}", source_app_name);
    return Ok(None);
}
```

### UI

设置页 Privacy Tab：
- 显示当前排除列表
- 添加按钮：弹出应用选择器或手动输入 bundle ID
- 删除按钮：移除已添加的应用

## 验收标准

- [ ] 将 1Password 加入排除列表后，从 1Password 复制不出现在历史中
- [ ] 移除排除后恢复正常记录
- [ ] 排除列表持久化，重启后生效
- [ ] UI 清晰展示已排除的应用列表
